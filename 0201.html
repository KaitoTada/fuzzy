<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>ファジィ推論とその応用2</title>
		<script type="text/javascript" src="./0101.js"></script>
		<script type="text/javascript" src="./plot.js"></script>
	</head>
	<body>
		<h1>第2回実習課題</h1>
		<h3>実習課題1</h3>
		<p>
			IF-THEN規則
			<br>
			if ( 現在室温 < 目標温度 ) and ( 現在気温 < 外気温 ) then y is そのまま
			<br>
			if ( 現在室温 < 目標温度 ) and ( 現在気温 = 外気温 ) then y is 温める
			<br>
			if ( 現在室温 < 目標温度 ) and ( 現在気温 > 外気温 ) then y is 温める
			<br>
			if ( 現在室温 = 目標温度 ) and ( 現在気温 < 外気温 ) then y is 冷やす
			<br>
			if ( 現在室温 = 目標温度 ) and ( 現在気温 = 外気温 ) then y is そのまま
			<br>
			if ( 現在室温 = 目標温度 ) and ( 現在気温 > 外気温 ) then y is 温める
			<br>
			if ( 現在室温 > 目標温度 ) and ( 現在気温 < 外気温 ) then y is 冷やす
			<br>
			if ( 現在室温 > 目標温度 ) and ( 現在気温 = 外気温 ) then y is 冷やす
			<br>
			if ( 現在室温 > 目標温度 ) and ( 現在気温 > 外気温 ) then y is そのまま
		</p>
		<p>
			<canvas id="CANVAS_A" width="400" height="300"></canvas>
			<canvas id="CANVAS_B" width="400" height="300"></canvas>
			<canvas id="CANVAS_C" width="400" height="300"></canvas>
		</p>
		<script type="text/javascript">
		window.addEventListener('load', function(){
			let goal = 25;
			let RT_LeftSholder = new Fuzzy(-1, 0, true);
			let RT_Triangle = Fuzzy.Triangle(-1, 0, 1);
			let RT_RightSholder = new Fuzzy(0, 1);
			let OT_LeftSholder = new Fuzzy(-1, 0, true);
			let OT_RightSholder = new Fuzzy(0, 1);
			let OT_Triangle = Fuzzy.Triangle(-1, 0, 1);
			let plot_RT = new Plot({name:"温度誤差", canvas: "CANVAS_A", x_start: -1, x_end:1, roop:1000});
			let plot_OT = new Plot({name:"温度差", canvas: "CANVAS_B", x_start: -1, x_end:1, roop:1000});
			let plot_C = new Plot({name:"出力", canvas: "CANVAS_C", x_start: -1, x_end:1, roop:1000});
			plot_RT.plot(RT_LeftSholder, "steelblue");
			plot_RT.plot(RT_Triangle, "greenyellow");
			plot_RT.plot(RT_RightSholder, "tomato");
			plot_OT.plot(OT_LeftSholder, "steelblue");
			plot_OT.plot(OT_Triangle, "greenyellow");
			plot_OT.plot(OT_RightSholder, "tomato");
// 			plot_C.plot(LeftSholder);
// 			plot_C.plot(Triangle);
// 			plot_C.plot(Trapezoid);
		});
		</script>

		<h3>プログラミング課題2</h3>
		<p>
			input
			<br>
			<input type="text" name="input" id="input" placeholder="数字を入力して下さい。">
			<br>
			output
			<br>
			<textarea name="output" id="output" rows="6" cols="50"></textarea>
		</p>
		<h3>プログラム課題3</h3>
		<p>
			<canvas id="CANVAS" width="600" height="400"></canvas>
		</p>
		<script type="text/javascript">
		window.addEventListener('load', function(){
			let min = 10, max = 40;
			let grade = [
										["寒い", "blue", 15, 20],
										["やや寒い", "cyan", 15, 20, 25],
										["適温", "lime", 20, 25, 30],
										["やや暑い", "yellow", 25, 30, 35],
										["暑い", "orangered", 30, 35]
			];
			let fuzzy = [
				new Fuzzy(grade[0][2], grade[0][3], true),
				Fuzzy.Triangle(grade[1][2], grade[1][3], grade[1][4]),
				Fuzzy.Triangle(grade[2][2], grade[2][3], grade[2][4]),
				Fuzzy.Triangle(grade[3][2], grade[3][3], grade[3][4]),
				new Fuzzy(grade[4][2], grade[4][3])
			];
			let plot = new Plot({name:"三角型メンバシップ関数", canvas: "CANVAS", x_start: min, x_end: max, roop:1000, scale_interval:5});
			for (let i = 0; i < fuzzy.length; i++) {
				plot.plot(fuzzy[i], grade[i][1]);
			}
			// output fyzzy results
			let inputArea = document.getElementById("input");
			let outputArea = document.getElementById("output");
			let result = function () {
				let input = inputArea.value;
				let results = "";
				for (let i = 0; i < fuzzy.length; i++) {
					results += grade[i][0] + ":" + fuzzy[i].getT(input) + "\n";
				}
				outputArea.value = results;
			}
			inputArea.addEventListener("change", result);
		});
		</script>
	</body>
</html>
